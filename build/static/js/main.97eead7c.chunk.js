(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){"use strict";n.r(t);var r=n(14),c=n.n(r),o=n(2),i=n(3),u=n(0),a=function(e){var t=e.message;return t?Object(u.jsx)("div",{style:t.includes("added")?{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:t}):null},s=n(4),d=n.n(s),l="api/persons",b=function(){return d.a.get(l).then((function(e){return e.data})).catch((function(e){return console.error(e)}))},j=function(e){return d.a.post(l,e).then((function(e){return e.data}))},h=function(e,t){return d.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))},f=function(e){return d.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},m=function(){var e=Object(o.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(o.useState)(""),s=Object(i.a)(c,2),d=s[0],l=s[1],m=Object(o.useState)(""),O=Object(i.a)(m,2),g=O[0],p=O[1],x=Object(o.useState)(""),v=Object(i.a)(x,2),y=v[0],w=v[1],S=Object(o.useState)(""),k=Object(i.a)(S,2),C=k[0],B=k[1];Object(o.useEffect)((function(){b().then((function(e){console.log("promise fulfilled"),r(e)}))}),[]),console.log("render",n.length,"persons");return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"PhoneBook"}),Object(u.jsx)(a,{message:C}),Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsxs)("div",{children:["filter shown with",Object(u.jsx)("input",{type:"text",value:y,onChange:function(e){w(e.target.value),r(n.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())})))},required:!0})]}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=n.filter((function(e){return e.name===d.trim()}));t.length?(u.Fragment,!0===window.confirm("This name already exists,replace the old numbers")&&h(t[0].id,{name:d,number:g.trim()}).then((function(e){r(n.map((function(n){return n.id!==t[0].id?n:e})))})).catch((function(e){B("name has already be deleted from the server"),setTimeout((function(){B("")}),2e3)}))):j({name:d,number:g}).then((function(e){r(n.concat(e)),B("added new name"),setTimeout((function(){B("")}),5e3)})),l(""),p("")},children:[Object(u.jsxs)("div",{children:["name : ",Object(u.jsx)("input",{type:"text",value:d,onChange:function(e){l(e.target.value)},required:!0})]}),Object(u.jsxs)("div",{children:["number : ",Object(u.jsx)("input",{type:"number",value:g,onChange:function(e){return p(e.target.value)},required:!0})]}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{children:"add"}),Object(u.jsx)("br",{})]}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)("ul",{children:n.map((function(e,t){return Object(u.jsxs)("li",{children:[e.name," ",e.number,"  ",Object(u.jsx)("button",{onClick:function(){return t=e.id,void f(t).then((function(e){r(n.filter((function(e){return e.id!==t})))})).catch((function(e){console.error(e)}));var t},children:"Delete"})]},"list".concat(t))}))})]})};c.a.render(Object(u.jsx)(m,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.97eead7c.chunk.js.map
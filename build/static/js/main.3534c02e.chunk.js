(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){"use strict";n.r(t);var r=n(14),o=n.n(r),c=n(2),i=n(3),a=n(0),u=function(e){var t=e.message;return t?Object(a.jsx)("div",{style:t.includes("added")?{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:t}):null},s=n(4),d=n.n(s),l="api/persons",b=function(){return d.a.get(l).then((function(e){return e.data})).catch((function(e){return console.error(e)}))},j=function(e){return d.a.post(l,e).then((function(e){return e.data}))},f=function(e,t){return d.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))},h=function(e){return d.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},m=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),s=Object(i.a)(o,2),d=s[0],l=s[1],m=Object(c.useState)(""),O=Object(i.a)(m,2),p=O[0],g=O[1],x=Object(c.useState)(""),v=Object(i.a)(x,2),y=v[0],w=v[1],S=Object(c.useState)(""),k=Object(i.a)(S,2),C=k[0],B=k[1],T={name:d,number:p};Object(c.useEffect)((function(){b().then((function(e){console.log("promise fulfilled"),r(e)}))}),[]),console.log("render",n.length,"persons");return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"PhoneBook"}),Object(a.jsx)(u,{message:C}),Object(a.jsx)("h2",{children:"add a new"}),Object(a.jsxs)("div",{children:["filter shown with",Object(a.jsx)("input",{type:"text",value:y,onChange:function(e){w(e.target.value),r(n.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())})))},required:!0})]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=n.filter((function(e){return e.name===d.trim()}));t.length?(a.Fragment,!0===window.confirm("This name already exists,replace the old numbers")&&f(t[0].id,{name:d,number:p.trim()}).then((function(e){r(n.map((function(n){return n.id!==t[0].id?n:e})))})).catch((function(e){e.response.data?B(e.response.data.error):B("name was already be deleted from the server"),setTimeout((function(){B("")}),2e3)}))):j(T).then((function(e){r(n.concat(e)),B("added new name"),setTimeout((function(){B("")}),5e3)})).catch((function(e){console.log(e.response.data.error,typeof e.response.data.error),B(e.response.data.error),setTimeout((function(){B("")}),3e3)})),l(""),g("")},children:[Object(a.jsxs)("div",{children:["name :"," ",Object(a.jsx)("input",{type:"text",value:d,onChange:function(e){l(e.target.value)},required:!0})]}),Object(a.jsxs)("div",{children:["number :"," ",Object(a.jsx)("input",{type:"text",value:p,onChange:function(e){return g(e.target.value)},required:!0})]}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{children:"add"}),Object(a.jsx)("br",{})]}),Object(a.jsx)("h2",{children:"Numbers"}),Object(a.jsx)("ul",{children:n.map((function(e,t){return Object(a.jsxs)("li",{children:[e.name," ",e.number," ",Object(a.jsx)("button",{onClick:function(){return t=e.id,void h(t).then((function(e){r(n.filter((function(e){return e.id!==t})))})).catch((function(e){console.error(e)}));var t},children:"Delete"})]},"list".concat(t))}))})]})};o.a.render(Object(a.jsx)(m,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.3534c02e.chunk.js.map